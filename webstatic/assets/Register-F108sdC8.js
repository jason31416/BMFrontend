import{_,r,c as v,f as s,z as x,g as V,t as q,l as n,v as i,s as f,j as B,w as N,B as P,A as R,b as c,k as U}from"./index-TIiU0LZt.js";import{a as g,_ as b}from"./const-ClyfiBNT.js";import{J as C}from"./JSEncrypt-BF8AmNNu.js";const E={class:"container"},S={class:"login-card"},j={key:0,class:"error-message"},D={class:"input-group"},J={class:"input-group"},M={class:"input-group"},T={class:"input-group"},z={class:"login-link"},A={__name:"Register",setup(F){const u=r(""),a=r(""),l=r(""),d=r(""),o=r(null),w=R();function k(){return l.value!==d.value?(o.value="两次输入的密码不一致",!1):a.value.includes("@")?!0:(o.value="请输入有效的邮箱地址",!1)}function y(){k()&&(o.value=null,g.get(b.backendurl+"/api/publickey").then(m=>{var e=new C;e.setPublicKey(m.data);var p=e.encrypt(l.value);g.post(b.backendurl+"/api/register",{username:u.value,email:a.value,password:p}).then(t=>{t.data.success==!0?(U.set("bmsessiontoken",t.data.token,"1d"),w.push("/")):o.value=t.data.message}).catch(t=>{o.value="注册失败，请稍后再试",console.error("Register error:",t)})}))}return(m,e)=>{const p=P("router-link");return c(),v("div",E,[s("div",S,[e[11]||(e[11]=s("h1",{class:"title"},"创建账号",-1)),s("form",{onSubmit:x(y,["prevent"]),class:"form"},[o.value?(c(),v("div",j,q(o.value),1)):V("",!0),s("div",D,[e[4]||(e[4]=s("label",{for:"username"},"用户名",-1)),n(s("input",{id:"username",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),class:"input",placeholder:"请输入您的游戏内用户名",required:""},null,512),[[i,u.value]])]),s("div",J,[e[5]||(e[5]=s("label",{for:"email"},"邮箱",-1)),n(s("input",{id:"email",type:"email","onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t),class:"input",placeholder:"请输入您的邮箱",required:""},null,512),[[i,a.value]])]),s("div",M,[e[6]||(e[6]=s("label",{for:"password"},"密码",-1)),n(s("input",{id:"password",type:"password","onUpdate:modelValue":e[2]||(e[2]=t=>l.value=t),class:"input",placeholder:"••••••••",required:""},null,512),[[i,l.value]])]),s("div",T,[e[7]||(e[7]=s("label",{for:"confirmPassword"},"确认密码",-1)),n(s("input",{id:"confirmPassword",type:"password","onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),class:"input",placeholder:"••••••••",required:""},null,512),[[i,d.value]])]),e[10]||(e[10]=s("button",{type:"submit",class:"button"},"注册",-1)),s("p",z,[e[9]||(e[9]=f(" 已有账号？")),B(p,{to:"/login"},{default:N(()=>e[8]||(e[8]=[f("立即登录")])),_:1})])],32)])])}}},G=_(A,[["__scopeId","data-v-5319f681"]]);export{G as default};
